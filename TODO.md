# TODO

> _This file was partially generated by GitHub Copilot_

## ðŸ¦€ Rust

### Memory Management & Performance

Ownership model and zero-cost abstractions

- [ ] **Replace `Vec<Cell>` with bit-packed representation**
  - Use `Vec<u8>` or `Vec<u64>` to store 8/64 cells per byte/word
  - Learn: bitwise operations, memory layout optimization
  - Impact: 8x memory reduction, better cache locality

- [ ] **Implement custom memory pool for cell states**
  - Pre-allocate buffers, swap instead of clone
  - Learn: ownership, borrowing, avoiding allocations
  - Impact: eliminate allocations in hot path (`tick()`)

- [ ] **Add benchmarks with `criterion`**
  - Benchmark `tick()` for different grid sizes
  - Learn: profiling Rust code, performance measurement
  - Impact: data-driven optimization decisions

### Error Handling

Result/Option types

- [ ] **Remove `panic!()` from `get_index()`, return `Result<usize, Error>`**
  - Create custom error types
  - Learn: proper error handling, `Result` propagation
  - Impact: safer WASM interface

- [ ] **Add validation for universe creation**
  - Handle invalid dimensions gracefully
  - Learn: builder pattern, validation
  - Impact: better API design

---

## ðŸ”— Rust â†” JavaScript Interop

### Direct Memory Access

WASM linear memory model

- [ ] **Expose raw cell buffer to JavaScript**
  - Use `cells()` pointer to read memory directly from JS
  - Remove text-based `render()` method
  - Learn: WASM memory layout, shared memory, TypedArrays
  - Impact: 100x faster rendering

- [ ] **Implement double buffering**
  - Expose both current and next generation buffers
  - Learn: memory management across WASM boundary
  - Impact: smoother animations, less copying

- [ ] **Use `wasm-bindgen` features**
  - Pass callbacks from JS to Rust
  - Return complex types (structs, enums)
  - Learn: FFI patterns, serialization
  - Impact: richer API between Rust/JS

### Performance Profiling

Measure and optimize WASM performance

- [ ] **Add browser performance markers**
  - Use `web_sys::Performance` API from Rust
  - Learn: browser integration, performance APIs
  - Impact: identify bottlenecks

- [ ] **Compare WASM vs pure JS implementation**
  - Write equivalent JS version
  - Learn: when WASM provides value
  - Impact: understand WASM strengths/weaknesses

---

## ðŸ§¬ Advanced Rust Patterns

### Type Safety & Generics

Leverage Rust's type system

- [ ] **Make `Universe` generic over rule sets**
  - `Universe<R: Rules>` trait for different cellular automata
  - Learn: trait bounds, generic programming
  - Impact: support multiple game variants

- [ ] **Use the type system to prevent invalid states**
  - Separate types for `RunningUniverse` vs `PausedUniverse`
  - Learn: typestate pattern, compile-time guarantees
  - Impact: safer API, impossible states unrepresentable

### Iterators & Functional Programming

Iterator patterns

- [ ] **Rewrite `tick()` using iterator adapters**
  - Use `enumerate()`, `zip()`, `map()`, `collect()`
  - Learn: zero-cost abstractions, iterator chains
  - Impact: more idiomatic Rust

- [ ] **Implement `Iterator` for universe cells**
  - Create `CellIterator` with custom logic
  - Learn: trait implementation, iterator protocol
  - Impact: composable, reusable code

---

## ðŸš€ WASM-Specific Optimizations

### Web Workers & Parallelism

Concurrent WASM

- [ ] **Move universe computation to Web Worker**
  - Run `tick()` off main thread
  - Learn: WASM in workers, message passing
  - Impact: non-blocking UI

- [ ] **Experiment with `wasm-bindgen-rayon`**
  - Parallel processing with Rayon
  - Learn: Rust parallelism, SharedArrayBuffer
  - Impact: multi-threaded WASM

### WASM Build Optimization

Optimize bundle size and startup

- [ ] **Minimize WASM binary size**
  - Use `wee_alloc`, strip debug symbols, optimize settings
  - Learn: WASM build pipeline, code size optimization
  - Impact: faster downloads, quicker startup

- [ ] **Enable WASM SIMD**
  - Use SIMD instructions for batch operations
  - Learn: SIMD in WASM, portable SIMD
  - Impact: 4x+ speedup on supporting browsers

---

## ðŸ§ª Testing & Correctness

### Rust Testing Patterns

Write comprehensive Rust tests

- [ ] **Add property-based tests with `proptest`**
  - Test invariants (population bounds, determinism)
  - Learn: generative testing, property-based testing
  - Impact: catch edge cases

- [ ] **Write WASM integration tests**
  - Use `wasm-bindgen-test` for browser testing
  - Learn: testing WASM in browser environment
  - Impact: confidence in JS interop

### React + WASM Testing

Test across the boundary

- [ ] **Mock WASM module for React tests**
  - Isolate React logic from WASM
  - Learn: test boundaries, mocking strategies
  - Impact: faster, reliable tests

---

## ðŸ“– Resources

- [Rust WASM Book](https://rustwasm.github.io/docs/book/)
- [wasm-bindgen Guide](https://rustwasm.github.io/docs/wasm-bindgen/)
- [Rust Performance Book](https://nnethercote.github.io/perf-book/)
- [WASM Reference Types](https://rustwasm.github.io/docs/wasm-bindgen/reference/)
